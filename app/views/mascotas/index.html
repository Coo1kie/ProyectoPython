{% extends 'layouts/app.html' %}
 
<!-- Inicio bloque body -->
{% block body %}
 
<section class="py-5 text-center container">
  <div class="row py-lg-5">
    <div class="col-lg-6 col-md-8 mx-auto">

      {% with messages = get_flashed_messages() %}
      {% if messages %}
      {% for message in messages %}
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>Hey!</strong> {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>

      {% endfor%}
      {% endif %}
      {% endwith%}

      <h1 class="fw-light">Mascotas</h1>
      <p class="lead text-muted">Inicio de Mascotas</p>
      <p>
        <a href="{{url_for('mascota_router.create')}}" class="btn btn-primary my-2">Nuevo</a>
        
      </p>
    </div>
  </div>
</section>

<section class="container">
  <div class="row ">
    <div class="col-lg-12 mx-auto">
      <div class="card">
        <div class="card-body">
          <!--
          {% for data in propietarios %} <!--viene del controlador, metodo index1
          <div class="shadow p-3 mb-5 bg-body rounded">{{data.ci}}
          </div>
          <div class="shadow p-3 mb-5 bg-body rounded">{{data.nombre}}</div>
          <div class="shadow p-3 mb-5 bg-body rounded">{{data.apellido}}</div>
          <div class="shadow p-3 mb-5 bg-body rounded">{{data.telcel}}</div>
          {% endfor %}         TABLA chafita-->
         <table id="mytable" class="table table-striped table-bordered nowrap" style="width: 100%">
            <thead>
              <tr>
                <th scope="col">ID_mascota</th>
                <th scope="col">Nombre</th>
                <th scope="col">Especie</th>
                <th scope="col">Raza</th>
                <th scope="col">Genero</th>
                <th scope="col">Color</th>
                <th scope="col">Fecha Nac</th>
                <th scope="col">Esterilizado</th>
                <th scope="col">Propietario</th>
                <th>Opciones</th>
              </tr>
            </thead>
            <tbody>
              {% for data in mascotas %}
              <tr>
                <td>{{data.idm}}</td>
                <td>{{data.name}}</td>
                <td>{{data.especie}}</td>
                <td>{{data.raza}}</td>
                <td>{{data.genero}}</td>
                <td>{{data.color}}</td>
                <td>{{data.fechanac}}</td>
                <td>{{data.esterilizacion}}</td>
                <td>{{data.propietario.nombre}}</td>
                
                <td>
                  <a href="{{url_for('mascota_router.delete', idm=data.idm)}}"
                      class="btn btn-danger btn-sm "><i class="fa fa-trash"></i></a>
                  <a href="{{url_for('mascota_router.edit', idm=data.idm)}}"
                      class="btn btn-dark btn-sm "><i class="fa fa-edit"></i></a>
              </td>
              </tr>    
              {%endfor%}    
            </tbody>
          </table>
               
        </div>
      </div>
      
    </div>
  </div>
</section>
{% endblock %}
<!-- Fin bloque body -->
 
{% block css%}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/rowreorder/1.2.8/css/rowReorder.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">
{% endblock %}
<!-- Fin bloque estilos -->
 
{% block js%}
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/rowreorder/1.2.8/js/dataTables.rowReorder.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
<script>
    $(document).ready(function() {
    var table = $('#mytable').DataTable( {
        rowReorder: {
            selector: 'td:nth-child(2)'
        },
        responsive: true
    } );
} );
</script>
{% endblock %}
<!-- Fin bloque scripts -->